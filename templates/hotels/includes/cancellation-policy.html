<!-- 
COMPONENT: Cancellation Policy Display
PURPOSE: Single source of truth for cancellation policy text
DEFENSIVE: Null checks, fallback if policy undefined

CONTRACT:
- Input: hotel_policy (dict with policy_type, refund_percentage, policy_text, free_cancel_until_display)
- Output: Alert box with policy details or "Not Available"
- Reusable: confirmation.html, payment.html, etc.

ARCHITECTURAL GUARANTEE:
If hotel_policy is missing, shows defensive message instead of crashing
-->

{% if hotel_policy %}
    <div class="alert alert-info" style="margin-top: 1.5rem;">
        <strong>
            <i class="fas fa-info-circle"></i>
            Cancellation Policy
        </strong>
        <p style="margin: 0.5rem 0 0 0;">{{ hotel_policy.policy_text }}</p>
        
        {% if hotel_policy.policy_type == 'FREE' %}
        <small style="display: block; margin-top: 0.5rem; color: #155724;">
            <i class="fas fa-check-circle"></i>
            Free cancellation available
        </small>
        {% elif hotel_policy.policy_type == 'PARTIAL' %}
        <small style="display: block; margin-top: 0.5rem; color: #856404;">
            <i class="fas fa-exclamation-circle"></i>
            {{ hotel_policy.refund_percentage }}% refund on cancellation
        </small>
        {% else %}
        <small style="display: block; margin-top: 0.5rem; color: #721c24;">
            <i class="fas fa-times-circle"></i>
            Non-refundable booking
        </small>
        {% endif %}
    </div>
{% else %}
    <!-- DEFENSIVE: Policy data missing or corrupted -->
    <div class="alert alert-warning" style="margin-top: 1.5rem;">
        <strong>
            <i class="fas fa-exclamation-triangle"></i>
            Cancellation Policy Not Available
        </strong>
        <p style="margin: 0.5rem 0 0 0;">
            Please contact the property for cancellation policy details.
        </p>
    </div>
{% endif %}
